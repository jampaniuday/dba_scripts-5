SELECT B.USERNAME,A.PROFILE,COUNT(1) AS CANT,CASE WHEN LIMIT='UNLIMITED' THEN LIMIT ELSE to_char(ROUND(COUNT(1)*100/LIMIT)) END AS POR_UTIL
FROM DBA_PROFILES A INNER JOIN DBA_USERS B ON (A.PROFILE=B.PROFILE AND RESOURCE_NAME ='SESSIONS_PER_USER')
INNER JOIN GV$SESSION C ON (B.USERNAME=C.USERNAME) GROUP BY B.USERNAME,A.PROFILE,LIMIT;

SELECT USERNAME, RESOURCE_NAME, LIMIT
FROM DBA_USERS A, DBA_PROFILES B
WHERE
A.PROFILE = B.PROFILE AND
(A.USERNAME LIKE '%RASC%' OR A.USERNAME IN ('SYS','SYSTEM')) AND 
RESOURCE_NAME IN ('IDLE_TIME','SESSIONS_PER_USER','PASSWORD_LIFE_TIME')
ORDER BY 2,1
