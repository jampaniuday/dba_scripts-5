select 'ALTER INDEX '||owner||'.'||index_name||' REBUILD TABLESPACE '||TABLESPACE_NAME|| ';' FROM  DBA_INDEXES WHERE tablespace_name = 'ADM_CR_BIG_INDEX' ORDER BY OWNER, INDEX_NAME;

select 'ALTER INDEX '||owner||'.'||index_name||' REBUILD ONLINE;' FROM  DBA_INDEXES where table_name in ('ADM_EXTERNAL_PARAM','ADM_REQUESTS','ADM_LOG') AND INDEX_TYPE <> 'LOB';

select 'ALTER INDEX '||owner||'.'||index_name||' REBUILD ONLINE;' FROM  DBA_INDEXES where table_name = 'ADM_REQUESTS' AND INDEX_TYPE <> 'LOB';

select 'ALTER INDEX '||owner||'.'||index_name||' REBUILD ONLINE;' FROM  DBA_INDEXES where table_name = 'PPGA_LISTASBLOQ' AND INDEX_TYPE <> 'LOB';

ALTER INDEX ADM_CR.ADM_LOG_1_IX02 REBUILD ONLINE;
ALTER INDEX ADM_CR.ADM_LOG_1_IX00 REBUILD ONLINE;
ALTER INDEX ADM_CR.SYS_C0012333 REBUILD ONLINE;
ALTER INDEX ADM_CR.SYS_C006054 REBUILD ONLINE;
ALTER INDEX ADM_PA.SYS_C006113 REBUILD ONLINE;
ALTER INDEX ADM_PA.ADM_LOG_1_IX02 REBUILD ONLINE;
ALTER INDEX ADM_PA.ADM_LOG_IX00 REBUILD ONLINE;
ALTER INDEX ADM_PA.SYS_C003394 REBUILD ONLINE;
ALTER INDEX ADM_NI.ADM_LOG_IX02 REBUILD ONLINE;
ALTER INDEX ADM_NI.ADM_LOG_IX00 REBUILD ONLINE;
ALTER INDEX ADM_NI.SYS_C004386 REBUILD ONLINE;
ALTER INDEX ADM_NI.SYS_C006238 REBUILD ONLINE;


ALTER INDEX ADM_CR.ADM_REQUESTS_CONVERSATION_ID REBUILD ONLINE;
ALTER INDEX ADM_CR.ADM_REQUESTS_IX00 REBUILD ONLINE;
ALTER INDEX ADM_CR.ADM_REQUEST_IX02 REBUILD ONLINE;
ALTER INDEX ADM_CR.SYS_C002909 REBUILD ONLINE;
ALTER INDEX ADM_PA.ADM_REQUESTS_CONVERSATION_ID REBUILD ONLINE;
ALTER INDEX ADM_PA.ADM_REQUESTS_IX00 REBUILD ONLINE;
ALTER INDEX ADM_PA.SYS_C003443 REBUILD ONLINE;
ALTER INDEX ADM_NI.ADM_REQUESTS_IX02 REBUILD ONLINE;
ALTER INDEX ADM_NI.ADM_REQUESTS_CONVERSATION_ID REBUILD ONLINE;
ALTER INDEX ADM_NI.ADM_REQUESTS_IX00 REBUILD ONLINE;
ALTER INDEX ADM_NI.SYS_C004435 REBUILD ONLINE;
---------------------

ALTER INDEX ADM_GT.SYS_C003469 REBUILD ONLINE;
ALTER INDEX ADM_GT.ADM_REQUESTS_IX00 REBUILD ONLINE;
ALTER INDEX ADM_GT.ADM_REQUESTS_CONVERSATION_ID REBUILD ONLINE;
ALTER INDEX ADM_GT.ADM_REQUESTS_IX02 REBUILD ONLINE;
ALTER INDEX ADM_GT.ADM_LOG_IX02 REBUILD ONLINE;
ALTER INDEX ADM_GT.ADM_LOG_IX00 REBUILD ONLINE;
ALTER INDEX ADM_GT.SYS_C003420 REBUILD ONLINE;
ALTER INDEX ADM_GT.SYS_C003863 REBUILD ONLINE;
ALTER INDEX ADM_SV.SYS_C003869 REBUILD ONLINE;
ALTER INDEX ADM_SV.SYS_C003098 REBUILD ONLINE;
ALTER INDEX ADM_SV.ADM_REQUESTS_IX00 REBUILD ONLINE;
ALTER INDEX ADM_SV.ADM_REQUESTS_CONVERSATION_ID REBUILD ONLINE;
ALTER INDEX ADM_SV.ADM_REQUESTS_IX02 REBUILD ONLINE;
ALTER INDEX ADM_SV.ADM_LOG_IX02 REBUILD ONLINE;
ALTER INDEX ADM_SV.ADM_LOG_IX00 REBUILD ONLINE;
ALTER INDEX ADM_SV.SYS_C003049 REBUILD ONLINE;

-------------------


create index adm_ni.adm_external_param_ix_scrbnft
on adm_ni.adm_external_param(subscription_benefit_id)
tablespace adm_ni_big_index;

create index adm_cr.adm_external_param_ix_scrbnft
on adm_cr.adm_external_param(subscription_benefit_id)
tablespace adm_cr_big_index;

create index adm_pa.adm_external_param_ix_scrbnft
on adm_pa.adm_external_param(subscription_benefit_id)
tablespace adm_pa_big_index;

create index adm_gt.adm_external_param_ix_scrbnft on adm_gt.adm_external_param(subscription_benefit_id) tablespace adm_gt_big_index;

create index adm_sv.adm_external_param_ix_scrbnft on adm_sv.adm_external_param(subscription_benefit_id) tablespace adm_sv_big_index;

-------------

EXEC DBMS_STATS.gather_table_stats('ADM_CR', 'ADM_LOG', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_CR', 'ADM_EXTERNAL_PARAM', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_NI', 'ADM_LOG', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_NI', 'ADM_EXTERNAL_PARAM', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_PA', 'ADM_LOG', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_PA', 'ADM_EXTERNAL_PARAM', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_PA', 'ADM_REQUESTS', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_CR', 'ADM_REQUESTS', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_NI', 'ADM_REQUESTS', cascade => TRUE);
-----------
EXEC DBMS_STATS.gather_table_stats('ADM_SV', 'ADM_LOG', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_SV', 'ADM_EXTERNAL_PARAM', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_SV', 'ADM_REQUESTS', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_GT', 'ADM_LOG', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_GT', 'ADM_EXTERNAL_PARAM', cascade => TRUE);
EXEC DBMS_STATS.gather_table_stats('ADM_GT', 'ADM_REQUESTS', cascade => TRUE);
--------------

---------------------------------------------------------------------

ALTER INDEX PPGA.PK_LISTASBLOQ REBUILD ONLINE;

exec dbms_stats.gather_table_stats('PPGA', 'PPGA_LISTASBLOQ', CASCADE => TRUE, ESTIMATE_PERCENT => 100,degree => 4);

EXEC DBMS_STATS.gather_table_stats('PPGA', 'PPGA_LISTASBLOQ', cascade => TRUE);

exec dbms_stats.gather_table_stats('PPCS', 'PPCS_CONSALDO',partname=>’CONSALDO_120723', CASCADE => TRUE, ESTIMATE_PERCENT =>5,degree => 4);

